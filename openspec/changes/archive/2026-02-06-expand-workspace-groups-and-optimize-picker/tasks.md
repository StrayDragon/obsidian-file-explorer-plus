## 1. 数据模型与迁移

- [x] 1.1 将 `workspaceFocus` 从固定 3 组模型扩展为多组模型（含稳定 `id` 与激活字段迁移）
- [x] 1.2 在 `loadSettings` 中实现旧配置迁移（`activeIndex` 到新激活标识，补齐缺失字段）
- [x] 1.3 更新保存与读取路径，确保新增/删除/重排后持久化一致

## 2. 工具栏与交互

- [x] 2.1 改造工具栏工作区渲染为“3 个快捷 + `…` 溢出入口”
- [x] 2.2 实现溢出入口的全部工作区列表选择与激活/取消激活逻辑
- [x] 2.3 实现“最新使用在前”的展示顺序，并同步到快捷位与溢出列表
- [x] 2.4 校验按钮可访问性（aria-label、focus-visible、禁用态）与紧凑布局不破坏

## 3. 设置与管理链路

- [x] 3.1 设置页增加工作区新增/删除/重排能力，并支持全量工作区编辑
- [x] 3.2 管理工作区弹窗改为全量工作区选择，不再截断前 3 个
- [x] 3.3 右键菜单工作区操作改为覆盖全部工作区

## 4. 树选择器性能优化

- [x] 4.1 为成员树引入缓存节点模型，减少过滤/折叠时重复构建
- [x] 4.2 为过滤输入增加 debounce，合并连续输入导致的重渲染
- [x] 4.3 新增“Collapse all / Expand all”并保持现有选择状态一致
- [x] 4.4 增加空结果与按钮可用性状态处理（禁用/提示）

## 5. 验证

- [x] 5.1 运行 `openspec validate expand-workspace-groups-and-optimize-picker --strict --no-interactive`
- [x] 5.2 运行 `pnpm run build` 验证 TypeScript 构建通过
- [x] 5.3 手动验证场景：多于 3 组显示、溢出选择、重排后激活一致、树批量折叠与过滤流畅（补充：快捷位重排开关 on/off 行为验证）
