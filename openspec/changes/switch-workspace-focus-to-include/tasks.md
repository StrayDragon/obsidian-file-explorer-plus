## 1. 设置与数据模型（include 语义）

- [ ] 1.1 将 workspace 绑定模型定义为路径成员（文件/文件夹），并明确规范化规则（trim、去末尾 `/`、去重）
- [ ] 1.2 设计并实现从旧 exclude 语义到 include 语义的迁移策略（可识别路径迁移、不可识别条目进入 legacy/unresolved、提供清理入口）
- [ ] 1.3 更新设置页文案与字段命名，使 “Add to Workspace” 的用户心智模型与实际行为一致

## 2. Workspace include 视图过滤逻辑

- [ ] 2.1 在文件浏览器排序/渲染过滤流程中引入 workspace include 过滤阶段（仅显示成员 + 必要父目录）
- [ ] 2.2 支持文件夹成员：显示文件夹及其整个子树
- [ ] 2.3 支持空工作区：激活后展示空视图
- [ ] 2.4 确保与现有 pin/hide/focus 等功能的组合行为可预测（明确顺序或互斥策略）

## 3. 工具条交互

- [ ] 3.1 保持 3 个按钮互斥激活与再次点击取消激活
- [ ] 3.2 空工作区激活时提供最小可见的提示（例如 tooltip/notice），避免用户误以为插件崩溃（可选）

## 4. 右键菜单成员管理

- [ ] 4.1 为 file-menu（单文件/单文件夹）添加 Add/Remove to Workspace 1~3
- [ ] 4.2 为 files-menu（多选）添加批量 Add/Remove to Workspace 1~3，并对已包含项显示正确的操作文案
- [ ] 4.3 对 rename/delete 等文件操作更新成员路径或提供清理策略（至少保证不会永久保留无效路径）

## 5. 二级管理/清理界面（Modal）

- [ ] 5.1 在设置页增加 “Manage workspaces…” 入口，打开管理 modal
- [ ] 5.2 modal 内实现：按 workspace 展示成员列表、成员存在性标记、多选/全选、批量移除
- [ ] 5.3 modal 内实现：通过路径选择器批量添加到指定 workspace
- [ ] 5.4 modal 内实现：一键清理无效路径与去重

## 6. 验证与手动验收

- [ ] 6.1 `pnpm build` 与 `just output` 可稳定生成产物并同步到测试 vault
- [ ] 6.2 在测试仓库中验证关键场景：加入文件/文件夹→激活可见；同一成员加入多个 workspace；空 workspace；批量管理；清理无效路径
